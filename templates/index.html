<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Art Platform - Analyze, Enhance, Share</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#3498db">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="AI Art Platform">
    
    <!-- Manifest -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='icons/favicon-32x32.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/apple-touch-icon.png') }}">
    
    <!-- CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    
    <!-- Meta Description -->
    <meta name="description" content="Professional AI-powered art analysis, enhancement tools, and artist community platform. Upload, analyze, enhance, and share your artwork.">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#home">
                <i class="fas fa-palette me-2"></i>
                <span class="d-none d-sm-inline">AI Art Platform</span>
                <span class="d-sm-none">ArtAI</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#upload">
                            <i class="fas fa-upload me-1"></i>Upload
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#gallery">
                            <i class="fas fa-images me-1"></i>Gallery
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#community">
                            <i class="fas fa-users me-1"></i>Community
                        </a>
                    </li>
                </ul>
                
                <ul class="navbar-nav">
                    {% if user %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user-circle me-1"></i>{{ user[4] or user[1] }}
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#profile"><i class="fas fa-user me-2"></i>Profile</a></li>
                            <li><a class="dropdown-item" href="#my-artworks"><i class="fas fa-folder me-2"></i>My Artworks</a></li>
                            <li><a class="dropdown-item" href="#analytics"><i class="fas fa-chart-bar me-2"></i>Analytics</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/logout"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                        </ul>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <button class="btn btn-outline-light btn-sm me-2" onclick="showAuthModal('login')">
                            <i class="fas fa-sign-in-alt me-1"></i>Login
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="btn btn-light btn-sm" onclick="showAuthModal('register')">
                            <i class="fas fa-user-plus me-1"></i>Sign Up
                        </button>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main style="padding-top: 80px;">
        <!-- Hero Section -->
        <section id="home" class="hero-section py-5 bg-gradient-primary text-white">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6">
                        <h1 class="display-4 fw-bold mb-4">
                            Transform Your Art with AI
                        </h1>
                        <p class="lead mb-4">
                            Professional art analysis, powerful enhancement tools, and a thriving community of artists. 
                            Upload your artwork and discover new possibilities.
                        </p>
                        <div class="hero-buttons">
                            {% if not user %}
                            <button class="btn btn-light btn-lg me-3 mb-2" onclick="showAuthModal('register')">
                                <i class="fas fa-rocket me-2"></i>Get Started Free
                            </button>
                            {% endif %}
                            <button class="btn btn-outline-light btn-lg mb-2" onclick="scrollToSection('upload')">
                                <i class="fas fa-upload me-2"></i>Upload Artwork
                            </button>
                        </div>
                        
                        <!-- Feature highlights -->
                        <div class="row mt-4">
                            <div class="col-4">
                                <div class="text-center">
                                    <i class="fas fa-brain fa-2x mb-2"></i>
                                    <small class="d-block">AI Analysis</small>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="text-center">
                                    <i class="fas fa-magic fa-2x mb-2"></i>
                                    <small class="d-block">Enhancement</small>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="text-center">
                                    <i class="fas fa-share-alt fa-2x mb-2"></i>
                                    <small class="d-block">Community</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="hero-image text-center">
                            <div class="device-mockup">
                                <img src="{{ url_for('static', filename='images/hero-artwork.jpg') }}" 
                                     alt="AI Art Analysis Demo" class="img-fluid rounded shadow-lg">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upload Section -->
        <section id="upload" class="py-5">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="fw-bold">Upload Your Artwork</h2>
                    <p class="text-muted">Drag and drop or click to select your artwork files</p>
                </div>

                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="upload-zone card border-2 border-dashed border-primary bg-light">
                            <div class="card-body text-center p-5">
                                <i class="fas fa-cloud-upload-alt fa-4x text-primary mb-3"></i>
                                <h5>Drop your artwork here</h5>
                                <p class="text-muted mb-3">Or click to browse files</p>
                                
                                <input type="file" id="artworkUpload" class="d-none" accept="image/*" multiple>
                                <button class="btn btn-primary btn-lg" onclick="document.getElementById('artworkUpload').click()">
                                    <i class="fas fa-plus me-2"></i>Select Files
                                </button>
                                
                                <div class="mt-3">
                                    <small class="text-muted">
                                        Supports: JPG, PNG, GIF, BMP, WebP â€¢ Max 16MB per file
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- Upload Progress -->
                        <div id="uploadProgress" class="mt-3" style="display: none;">
                            <div class="card">
                                <div class="card-body">
                                    <h6>Uploading...</h6>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                             role="progressbar" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Upload Form (for metadata) -->
                        <div id="uploadForm" class="mt-4" style="display: none;">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Artwork Details</h5>
                                </div>
                                <div class="card-body">
                                    <form id="artworkMetadata">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="artworkTitle" class="form-label">Title</label>
                                                    <input type="text" class="form-control" id="artworkTitle" placeholder="Enter artwork title">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="artworkStyle" class="form-label">Style</label>
                                                    <select class="form-select" id="artworkStyle">
                                                        <option value="">Select style</option>
                                                        <option value="realistic">Realistic</option>
                                                        <option value="abstract">Abstract</option>
                                                        <option value="impressionist">Impressionist</option>
                                                        <option value="digital">Digital Art</option>
                                                        <option value="sketch">Sketch</option>
                                                        <option value="other">Other</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="artworkDescription" class="form-label">Description</label>
                                            <textarea class="form-control" id="artworkDescription" rows="3" 
                                                      placeholder="Describe your artwork..."></textarea>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="makePublic">
                                                <label class="form-check-label" for="makePublic">
                                                    <i class="fas fa-globe me-1"></i>Make public in gallery
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                            <button type="button" class="btn btn-outline-secondary" onclick="cancelUpload()">
                                                Cancel
                                            </button>
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-upload me-2"></i>Upload Artwork
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- My Artworks Section -->
        <section id="my-artworks" class="py-5 bg-light" {% if not user %}style="display: none;"{% endif %}>
            <div class="container">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="fw-bold">My Artworks</h2>
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-primary btn-sm" id="viewToggle" onclick="toggleView()">
                            <i class="fas fa-th-large me-1"></i>Grid
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="refreshArtworks()">
                            <i class="fas fa-sync-alt me-1"></i>Refresh
                        </button>
                    </div>
                </div>

                <div id="myArtworksGrid" class="row">
                    <!-- Artworks will be loaded here -->
                    <div class="col-12 text-center text-muted py-5">
                        <i class="fas fa-images fa-3x mb-3"></i>
                        <p>No artworks uploaded yet. Start by uploading your first piece!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery" class="py-5">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="fw-bold">Community Gallery</h2>
                    <p class="text-muted">Discover amazing artworks from our community</p>
                </div>

                <!-- Gallery Filters -->
                <div class="row mb-4">
                    <div class="col-lg-8 mx-auto">
                        <div class="card">
                            <div class="card-body">
                                <div class="row align-items-center">
                                    <div class="col-md-4">
                                        <select class="form-select" id="galleryStyle">
                                            <option value="">All Styles</option>
                                            <option value="realistic">Realistic</option>
                                            <option value="abstract">Abstract</option>
                                            <option value="digital">Digital Art</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <select class="form-select" id="gallerySortBy">
                                            <option value="recent">Most Recent</option>
                                            <option value="popular">Most Popular</option>
                                            <option value="likes">Most Liked</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="gallerySearch" placeholder="Search artworks...">
                                            <button class="btn btn-outline-secondary" type="button">
                                                <i class="fas fa-search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery Grid -->
                <div id="galleryGrid" class="row">
                    <!-- Gallery items will be loaded here -->
                </div>

                <!-- Load More Button -->
                <div class="text-center mt-4">
                    <button id="loadMoreGallery" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-plus me-2"></i>Load More
                    </button>
                </div>
            </div>
        </section>

        <!-- Community Section -->
        <section id="community" class="py-5 bg-light">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="fw-bold">Join Our Community</h2>
                    <p class="text-muted">Connect with fellow artists, share knowledge, and grow together</p>
                </div>

                <div class="row">
                    <div class="col-lg-4 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center">
                                <i class="fas fa-comments fa-3x text-primary mb-3"></i>
                                <h5>Critiques & Feedback</h5>
                                <p class="text-muted">Get constructive feedback from experienced artists and AI analysis</p>
                                <button class="btn btn-outline-primary">Join Discussions</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center">
                                <i class="fas fa-trophy fa-3x text-warning mb-3"></i>
                                <h5>Challenges & Contests</h5>
                                <p class="text-muted">Participate in themed challenges and showcase your skills</p>
                                <button class="btn btn-outline-warning">View Challenges</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center">
                                <i class="fas fa-graduation-cap fa-3x text-success mb-3"></i>
                                <h5>Learning Resources</h5>
                                <p class="text-muted">Access tutorials, tips, and techniques from master artists</p>
                                <button class="btn btn-outline-success">Start Learning</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-5">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="fw-bold">Powerful Features</h2>
                    <p class="text-muted">Everything you need to analyze, enhance, and share your artwork</p>
                </div>

                <div class="row">
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="feature-card text-center">
                            <div class="feature-icon">
                                <i class="fas fa-microscope"></i>
                            </div>
                            <h5>Advanced Analysis</h5>
                            <p class="text-muted">AI-powered composition, color, and technique analysis</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="feature-card text-center">
                            <div class="feature-icon">
                                <i class="fas fa-wand-magic-sparkles"></i>
                            </div>
                            <h5>Smart Enhancement</h5>
                            <p class="text-muted">Professional filters and automatic improvements</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="feature-card text-center">
                            <div class="feature-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <h5>Export Reports</h5>
                            <p class="text-muted">Download detailed analysis reports as PDF</p>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="feature-card text-center">
                            <div class="feature-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <h5>Mobile Ready</h5>
                            <p class="text-muted">Works perfectly on all devices and screen sizes</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5><i class="fas fa-palette me-2"></i>AI Art Platform</h5>
                    <p class="text-muted">Empowering artists with AI-driven analysis, enhancement tools, and a vibrant community platform.</p>
                    <div class="social-links">
                        <a href="#" class="text-white me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>Platform</h6>
                    <ul class="list-unstyled">
                        <li><a href="#upload" class="text-muted">Upload</a></li>
                        <li><a href="#gallery" class="text-muted">Gallery</a></li>
                        <li><a href="#community" class="text-muted">Community</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>Features</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-muted">AI Analysis</a></li>
                        <li><a href="#" class="text-muted">Enhancement</a></li>
                        <li><a href="#" class="text-muted">Export</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>Support</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-muted">Help Center</a></li>
                        <li><a href="#" class="text-muted">Tutorials</a></li>
                        <li><a href="#" class="text-muted">Contact</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>Legal</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-muted">Privacy</a></li>
                        <li><a href="#" class="text-muted">Terms</a></li>
                        <li><a href="#" class="text-muted">Cookies</a></li>
                    </ul>
                </div>
            </div>
            
            <hr class="my-4">
            
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0 text-muted">&copy; 2024 AI Art Platform. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0 text-muted">Made with <i class="fas fa-heart text-danger"></i> for artists worldwide</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Auth Modal -->
    <div class="modal fade" id="authModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="authModalTitle">Welcome Back</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Auth forms will be loaded here -->
                    <div id="authContent"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Artwork Modal -->
    <div class="modal fade" id="artworkModal" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="artworkModalTitle">Artwork Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="artworkContent">
                        <!-- Artwork details will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Analysis Modal -->
    <div class="modal fade" id="analysisModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title">AI Analysis Results</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="analysisContent">
                        <!-- Analysis results will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhancement Modal -->
    <div class="modal fade" id="enhancementModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title">Enhance Artwork</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="enhancementContent">
                        <!-- Enhancement tools will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation (Mobile) -->
    <div class="bottom-nav d-md-none">
        <div class="container-fluid">
            <div class="row text-center">
                <div class="col">
                    <a href="#home" class="bottom-nav-link active">
                        <i class="fas fa-home"></i>
                        <small>Home</small>
                    </a>
                </div>
                <div class="col">
                    <a href="#upload" class="bottom-nav-link">
                        <i class="fas fa-plus"></i>
                        <small>Upload</small>
                    </a>
                </div>
                <div class="col">
                    <a href="#gallery" class="bottom-nav-link">
                        <i class="fas fa-images"></i>
                        <small>Gallery</small>
                    </a>
                </div>
                <div class="col">
                    <a href="#community" class="bottom-nav-link">
                        <i class="fas fa-users"></i>
                        <small>Community</small>
                    </a>
                </div>
                {% if user %}
                <div class="col">
                    <a href="#profile" class="bottom-nav-link">
                        <i class="fas fa-user"></i>
                        <small>Profile</small>
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;"></div>
            <p class="mt-3">Processing...</p>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    
    <!-- Initialize Application -->
    <script>
        // Ensure proper initialization after DOM and scripts are loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for all scripts to load before initializing
            if (window.artPlatform) {
                console.log('ArtPlatform already initialized');
            } else {
                // Fallback initialization if needed
                setTimeout(function() {
                    if (window.artPlatform) {
                        console.log('ArtPlatform initialized with delay');
                    } else {
                        console.warn('ArtPlatform failed to initialize');
                    }
                }, 100);
            }
        });
    </script>
    
    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/static/sw.js');
            });
        }
    </script>
</body>
</html>